(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),s=a.n(i),o=(a(15),a(1)),l=a(2),u=a(4),c=a(3),h=a(5),v=(a(16),a(17),a(18),a(19),a(6)),d=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"avatar","data-x":this.props.x,"data-y":this.props.y})}}]),t}(n.Component),m=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.mon,t="monster prevDir".concat(e.prevDir," dir").concat(e.dir);return r.a.createElement("div",{className:t,"data-x":this.props.x,"data-y":this.props.y,"data-prevdir":e.dir,"data-id":this.props.mon.id})}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).tile=r.a.createRef(),a.state={touched:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"hasAvatar",value:function(){var e=this.tile.current.childNodes,t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){if(r.value.querySelector(".avatar"))return!0}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}},{key:"hasMonster",value:function(){var e=this.tile.current.childNodes,t=!0,a=!1,n=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){return!!r.value.querySelector(".monster")}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}}},{key:"getAvatar",value:function(){if(this.props.tile.target)return r.a.createElement(d,{x:this.props.tile.x,y:this.props.tile.y,tile:this})}},{key:"renderMonster",value:function(e,t){return r.a.createElement(m,{key:e,mon:t,x:t.mtargetx,y:t.mtargety,prevDir:t.prevDir})}},{key:"getMonster",value:function(){var e=[];if(this.props.monster){var t=0,a=!0,n=!1,r=void 0;try{for(var i,s=this.props.rm[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;e.push(this.renderMonster(t,o)),t++}}catch(l){n=!0,r=l}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return e}}},{key:"render",value:function(){var e=this.props.tile,t=e.x+"-"+e.y,a=this.props.target?"target":"",n=this.props.monsterTarget?"targetM":"",i=e.touchedA?"touchedA":"",s=e.touchedM?"touchedM":"",o=e.type,l=this.getAvatar(),u=this.getMonster(),c="loc ".concat(o," \n\t\t\t\t\t\t\t").concat(a,"\n\t\t\t\t\t\t\t").concat(n,"\n\t\t\t\t\t\t\t").concat(i," \n\t\t\t\t\t\t\t").concat(s," \n\t\t\t\t\t\t\t").concat(l?"avatarT":"","\n\t\t\t\t\t\t\t").concat(u?"monsterT":"");return r.a.createElement("div",{className:c,"data-type":o,"data-loc":t,"data-x":e.x,"data-y":e.y,ref:this.tile},l,u)}}]),t}(n.Component),y=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderTile",value:function(e,t,a,n,i,s){return r.a.createElement(p,{key:e,tile:t,target:a,monster:n,rm:i,mc:s,opacity:this.props.opacity})}},{key:"render",value:function(){var e=0,t=[],a=!0,n=!1,i=void 0;try{for(var s,o=this.props.tiles[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value,u=this.props.rid;"number"!==typeof u&&(u=parseInt(u));var c=e,h=c+"-"+u,v=this.props.monsters,d=!1,m=0,p=[],y=!0,f=!1,g=void 0;try{for(var b,k=v[Symbol.iterator]();!(y=(b=k.next()).done);y=!0){var O=b.value;"number"!==typeof O.mtargetx&&(O.mtargetx=parseInt(O.mtargetx)),"number"!==typeof O.mtargety&&(O.mtargety=parseInt(O.mtargety)),u===O.mtargety&&c===O.mtargetx&&(d=!0,m++,p.push(O))}}catch(S){f=!0,g=S}finally{try{y||null==k.return||k.return()}finally{if(f)throw g}}t.push(this.renderTile(h,l,l.target,d,p,m)),e++}}catch(S){n=!0,i=S}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return r.a.createElement("div",{className:"row"},t,r.a.createElement("div",{className:"clear"}))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={endTime:(new Date).getTime()+parseInt(a.props.time),remaining:Math.ceil(parseInt(a.props.time)/1e3)},a.countdown=a.countdown.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.timer=setInterval(this.countdown,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"countdown",value:function(){var e=(new Date).getTime(),t=Math.ceil((parseInt(this.state.endTime)-e)/1e3),a=this.props.endLevel;this.setState({remaining:t}),t<0&&a()}},{key:"render",value:function(){var e="#4d807f";return this.state.remaining<=3&&(e="red"),r.a.createElement("div",{className:"time"},r.a.createElement("span",{className:"countdown-timer flasher",style:{color:e}},this.state.remaining),r.a.createElement("br",null),"seconds")}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={targetx:0,targety:0,touched:1,monsterState:a.props.monsters,tileState:a.props.tiles},a.move=a.move.bind(Object(v.a)(a)),a.monsterRun=a.monsterRun.bind(Object(v.a)(a)),a.updateMonster=a.updateMonster.bind(Object(v.a)(a)),a.updateTouchCount=a.updateTouchCount.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("Board: componentDidMount: addEventListener: keydown"),document.addEventListener("keydown",this.move,!1),this.monsterRunID=setInterval(this.monsterRun,1e3)}},{key:"componentWillUnmount",value:function(){console.log("Board: componentWillUnmount: removeEventListener: keydown"),document.removeEventListener("keydown",this.move,!1),clearInterval(this.monsterRunID)}},{key:"updateTouchCount",value:function(e){this.setState({touched:parseInt(this.state.touched)+e}),this.checkForWin()}},{key:"checkForWin",value:function(){var e=this.props.updateGameStatus;this.state.touched===this.props.level.tiles&&e(!0,"Level Won","Next Level","next-level")}},{key:"paint",value:function(e,t){var a=this.state.tileState,n=!0,r=!1,i=void 0;try{for(var s,o=a[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,u=!0,c=!1,h=void 0;try{for(var v,d=l[Symbol.iterator]();!(u=(v=d.next()).done);u=!0){var m=v.value;m.x==e&&m.y==t?(m.target=!0,m.touchedA||(m.touchedA=!0,m.touchedM=!1,this.updateTouchCount(1))):m.target=!1}}catch(p){c=!0,h=p}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}},{key:"unpaint",value:function(e,t){var a=this.state.tileState,n=!0,r=!1,i=void 0;try{for(var s,o=a[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value,u=!0,c=!1,h=void 0;try{for(var v,d=l[Symbol.iterator]();!(u=(v=d.next()).done);u=!0){var m=v.value;m.x===e&&m.y===t&&(m.touchedM=!0,m.touchedA&&(m.touchedA=!1,this.updateTouchCount(-1)))}}catch(p){c=!0,h=p}finally{try{u||null==d.return||d.return()}finally{if(c)throw h}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}},{key:"calculateTargetLoc",value:function(e,t,a){var n,r;if("string"!==typeof e&&(e=e.toString()),"1"===e||"ArrowRight"===e||"d"===e||"D"===e)n=parseInt(t)+1,r=parseInt(a);else if("2"===e||"ArrowDown"===e||"s"===e||"S"===e)n=parseInt(t),r=parseInt(a)+1;else if("3"===e||"ArrowLeft"===e||"a"===e||"A"===e)n=parseInt(t)-1,r=parseInt(a);else if("4"===e||"ArrowUp"===e||"w"===e||"W"===e)n=parseInt(t),r=parseInt(a)-1;else if("n"===e||"N"===e){(0,this.props.updateGameStatus)(!0,"Super Power Activated: Skip to Next Level!","Next Level","next-level")}return{targetx:n,targety:r}}},{key:"monsterRun",value:function(){var e=this,t=document.querySelectorAll(".monster"),a=[],n=!0,r=!1,i=void 0;try{for(var s,o=function(){var t=s.value,n=parseInt(t.getAttribute("data-prevdir")),r=n,i=t.getAttribute("data-id"),o=t.getAttribute("data-x"),l=t.getAttribute("data-y"),u=e.calculateTargetLoc(n,o,l),c=document.querySelector('.tile[data-loc="'.concat(u.targetx,"-").concat(u.targety,'"]')),h=u.targetx,v=u.targety;null!=c?a.some(function(e){return e.mtargetx===h&&e.mtargety===v})&&(n=Math.ceil(4*Math.random()),h=o,v=l):(n=Math.ceil(4*Math.random()),h=o,v=l);var d=e.state.monsterState.find(function(e){return e.id==i});d.mtargetx=h,d.mtargety=v,d.prevDir=r,d.dir=n,a.push(d),e.updateBoardStateM(h,v)},l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)o()}catch(u){r=!0,i=u}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}this.setState({monsterState:a})}},{key:"updateMonster",value:function(e){var t=this.state.monsterState,a=!0,n=t.find(function(t){return t.id==e});return n.lives=n.lives-1,0===n.lives&&(a=!1),this.setState({monsterState:t.filter(function(e){return e.lives>0})}),console.log("Board: updateMonster: id:"+e+" lives:"+n.lives+" stillAlive:"+a),a}},{key:"move",value:function(e){var t=!1,a=document.querySelector(".avatar"),n=a.getAttribute("data-x"),r=a.getAttribute("data-y");console.log("Board: move: e.key: "+e.key+" x:"+n+" y:"+r);var i=this.calculateTargetLoc(e.key,n,r),s=document.querySelector('.tile[data-loc="'.concat(i.targetx,"-").concat(i.targety,'"]'));if(null!=s){var o=s.querySelector(".monster");if(null!=o){var l=o.getAttribute("data-id");console.log("Board: move: you smooshed the monster! id:"+l+" x:"+n+" y:"+r),t=this.updateMonster(l)}this.updateBoardState(i.targetx,i.targety,t)}}},{key:"updateBoardState",value:function(e,t,a){var n=parseInt(e),r=parseInt(t);this.setState({targetx:n,targety:r,tiles:this.paint(n,r)})}},{key:"updateBoardStateM",value:function(e,t){var a=parseInt(e),n=parseInt(t);this.setState({tileState:this.unpaint(a,n)})}},{key:"renderRows",value:function(){var e=[],t=0,a=!0,n=!1,i=void 0;try{for(var s,o=this.state.tileState[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;e.push(r.a.createElement(y,{key:t,rid:t,targetx:this.state.targetx,targety:this.state.targety,monsters:this.state.monsterState,tiles:l})),t++}}catch(u){n=!0,i=u}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"details-tab"},r.a.createElement("div",{className:"lives"},this.props.lives,r.a.createElement("br",null),r.a.createElement("span",null,"lives")),r.a.createElement("div",{className:"status"},this.state.touched,"/",this.props.level.tiles,r.a.createElement("br",null),r.a.createElement("span",null,"tiles")),r.a.createElement(f,{time:this.props.time,endLevel:this.props.endLevel})),r.a.createElement("div",{className:"board"},this.renderRows()))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={show:!1},a.showTutorial=a.showTutorial.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"showTutorial",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){return r.a.createElement("div",{className:"tcontainer"},r.a.createElement("div",{className:"tbutton",onClick:this.showTutorial},"See tutorial"),this.state.show?r.a.createElement("div",{className:"tutorial"},r.a.createElement("h3",null,"Objective"),r.a.createElement("p",null,"Turn all the tiles blue before the timer runs out."),r.a.createElement("h3",null,"Movement"),r.a.createElement("p",null,"You're the blue dot, on the blue tile in the top left corner. Move with your arrow keys - every tile you touch will turn blue."),r.a.createElement("h3",null,"Watch Out"),r.a.createElement("p",null,"Opposing forces are turning tiles gold. Undo their work by moving over them. If you touch your rivals three times, they disappear.")):"")}}]),t}(n.Component),k="Paint Run",O="1.0.4",S="https://github.com/ahl389/paint-run2",w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={name:k,version:O,home:S,lives:3,gameOver:!0,buttonMessage:"Begin Game!",seconds:a.props.level.time,statusCode:"new-game",statusMessage:"Paint Run",tutorial:!1},a.endLevel=a.endLevel.bind(Object(v.a)(a)),a.handleClick=a.handleClick.bind(Object(v.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("Game: componentDidMount: addEventListener: keydown"),document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){console.log("Game: componentWillUnmount: removeEventListener: keydown"),document.removeEventListener("keydown",this.handleKeyPress),console.log("unmounted!")}},{key:"handleClick",value:function(e){var t=this.state.statusCode;console.log("Game: handleClick: "+t),this.handleUserDidSomething(t)}},{key:"handleKeyPress",value:function(e){var t=this.state.statusCode;switch(console.log("Game: handleKeyPress: e.key: "+e.key+"  statusCode: "+t),e.key){default:break;case" ":case"Enter":case"n":case"N":this.handleUserDidSomething(t)}}},{key:"handleUserDidSomething",value:function(e){if(console.log("Game: handleUserDidSomething: "+e),"new-game"===e)this.setState({gameOver:!1});else if("same-level"===e)this.setState({gameOver:!1,touched:1});else if("next-level"===e){(0,this.props.increaseLevel)(),this.setState({lives:Math.min(this.state.lives+2,4),gameOver:!1,touched:1})}else if("restart"===e){this.setState({lives:3,gameOver:!1,touched:1}),(0,this.props.restart)()}}},{key:"updateGameStatus",value:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.state.lives;this.setState({gameOver:e,statusMessage:t,buttonMessage:a,lives:r,statusCode:n})}},{key:"endLevel",value:function(){console.log("Game: endLevel");var e=this.state.lives-1,t="",a="",n="";e>0?(t="Out of time, you have ".concat(e," lives remaining!"),a="Try again.",n="same-level"):(t="Game Over",a="Play again",n="restart"),this.updateGameStatus(!0,t,a,n,e)}},{key:"getTileState",value:function(e){for(var t=this.props.level.grid,a=[],n=0;n<t.length;n++){for(var r=t[n],i=[],s=0;s<r.length;s++){var o=r[s]?"tile":"space",l=0==s&&0==n,u=0==s&&0==n;i.push({x:s,y:n,type:o,target:l,touchedA:u,touchedM:!1})}a.push(i)}return a}},{key:"getMonsterState",value:function(e){for(var t=this.props.level.monsters,a=[],n=e.reduce(function(e,t){return e.concat(t)}).filter(function(e){return"tile"==e.type}),r=0;r<t;r++){var i=n[Math.floor(Math.random()*this.props.level.tiles/2)+Math.floor(this.props.level.tiles/2)];a.push({mtargetx:i.x,mtargety:i.y,dir:4,prevDir:4,lives:3,id:r})}return a}},{key:"render",value:function(){var e=this.getTileState(this.props.level.grid),t=this.getMonsterState(e),a=this.updateGameStatus,n=this.endLevel;return r.a.createElement("div",{className:"game-board"},r.a.createElement("div",{className:"header-content"},r.a.createElement("div",{className:"level"},r.a.createElement("h1",null,"Level ",this.props.level.levelNum),r.a.createElement(b,null)),r.a.createElement("div",{className:"about"},r.a.createElement("a",{href:this.state.home,target:"_blank",rel:"noopener noreferrer"},this.state.name," v",this.state.version))),r.a.createElement("div",{className:"clear"}),this.state.gameOver?r.a.createElement("div",{className:"gameover"},r.a.createElement("h1",null,this.state.statusMessage),r.a.createElement("button",{className:"button",onClick:this.handleClick,"data-statuscode":this.state.statusCode},this.state.buttonMessage)):r.a.createElement(g,{monsters:t,tiles:e,lives:this.state.lives,level:this.props.level,time:this.props.level.time,endLevel:n.bind(this),updateGameStatus:a.bind(this)}))}}]),t}(n.Component),E=[{tiles:[[1,1,1,0],[1,0,1,1],[1,0,1,0],[1,1,1,1]]},{tiles:[[1,1,1,1,0],[1,0,0,1,1],[1,0,1,1,1],[1,0,1,0,0],[1,1,1,1,0]]},{tiles:[[1,1,1,1,0,1],[0,0,0,1,1,1],[0,0,1,1,1,1],[1,0,1,1,0,1],[1,1,1,1,0,1],[0,1,0,1,1,1]]},{tiles:[[1,1,1,1,1,1],[0,0,0,1,1,1],[0,0,1,1,0,1],[1,0,0,1,0,1],[1,1,1,1,0,1],[0,1,1,1,1,1],[1,1,1,0,1,1]]},{tiles:[[1,0,1,1,0,1,0],[1,0,0,1,1,1,1],[1,0,1,1,0,1,1],[1,0,1,1,0,1,0],[1,1,1,0,0,1,0],[0,1,1,0,1,1,1],[0,1,0,1,1,1,0],[0,1,0,1,0,1,0],[0,1,1,1,1,1,1]]},{tiles:[[1,0,1,1,1,0,1,0],[1,0,0,0,1,1,1,1],[1,0,1,1,1,0,1,1],[1,0,1,1,1,1,0,1],[1,1,1,0,0,0,1,1],[0,1,1,0,0,0,1,1],[0,1,1,1,0,0,0,0],[0,1,0,1,1,1,1,1]]},{tiles:[[1,1,1,1,1,1,0,1,0,1],[0,1,0,0,1,0,1,1,1,1],[1,1,1,1,1,1,1,0,1,0],[0,0,1,0,0,1,1,1,1,1]]},{tiles:[[1,1,1,1,1,1,1,1,1],[1,1,0,0,1,0,0,1,1],[1,0,0,0,1,0,0,0,1],[1,0,0,1,1,1,0,0,1],[1,1,1,1,1,1,1,1,1],[1,0,0,1,1,1,0,0,1],[1,0,0,0,1,0,0,0,1],[1,1,0,0,1,0,0,1,1],[1,1,1,1,1,1,1,1,1]]},{tiles:[[1,1,1,1,1],[1,1,1,1,1],[1,1,1,0,1],[1,1,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,0,1],[1,0,0,1,1],[1,0,1,1,1],[1,1,1,1,1],[1,1,1,1,1]]}],j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={level:1,newLevel:!0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"restart",value:function(){this.setState({level:1})}},{key:"processLevelData",value:function(){var e=this.state.level-1;e>=E.length&&(this.restart(),e=0);var t=E[e].tiles,a=t.reduce(function(e,t){return e.concat(t)}).filter(function(e){return e}).length;return{levelNum:this.state.level,grid:t,rows:t.length,cols:t[0].length,tiles:a,time:750*a,monsters:this.getMonsterNum()}}},{key:"getMonsterNum",value:function(){return this.state.level>4?Math.floor(this.state.level/5+5):this.state.level>3?this.state.level-1:this.state.level}},{key:"increaseLevel",value:function(){this.setState({level:this.state.level+1})}},{key:"render",value:function(){var e=this.increaseLevel,t=this.processLevelData(),a=this.restart;return r.a.createElement("div",{className:"body"},r.a.createElement(w,{gameOver:!1,level:t,increaseLevel:e.bind(this),restart:a.bind(this)}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.d5cf4a72.chunk.js.map